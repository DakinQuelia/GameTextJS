<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu :: Création du personnage</title>
    <link rel="stylesheet" href="assets/css/game.css" />
</head>
<body>
    <script type="module" defer>
        import Game from "/scripts/game/player.js";
        import { PlayerInit } from '../scripts/game/alias.js';
        
        await PlayerInit();
    </script>
    <main class="container-fluid mt-10">
        <div class="form">
            <form action="/post" method="post" name="post" enctype="multipart/form-data">
                <input type="hidden" name="stats_vigor" id="stats_vigor" value="0" />
                <input type="hidden" name="stats_willingness" id="stats_willingness" value="0" />
                <input type="hidden" name="stats_reflex" id="stats_reflex" value="0" />
                <div class="sheet-infos">
                    <h1>Création du personnage</h1>
                    <p>Ce formulaire vous permet de créer votre personnage.</p>
                </div>
                <div class="game-container">
                    <div class="sheet-row">
                        <div class="sheet full">
                            <div class="sheet-header">Personnage</div>
                            <div class="sheet-content">
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name">Classe(s) du personnage</div>
                                    </span>
                                    <span>
                                        <select name="character_class" id="character_class"></select>
                                        <span id="gcopy" class="jsmodal" data-href="#genwindow" data-title="Ce bouton vous permet de générer les caractéristiques à partir de la classe sélectionnée.">
                                            <i class="fas fa-copy button-icon"></i>
                                        </span>
                                    </span>
                                </div>
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name">Nom du personnage</div>
                                    </span>
                                    <span>
                                        <input type="text" name="character_name" id="character_name" value="" />
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Erreur :: Nombre élevé -->
                    <div class="sheet-row error" id="errors" style="display: none;">
                        <div class="sheet full">
                            <div class="sheet-header">Erreur(s)</div>
                            <div class="sheet-content">
                                <ul class="errors"></ul>
                            </div> 
                        </div>
                    </div>
                    <!-- Fin des Erreurs -->
                    <div class="sheet-row">
                        <div class="sheet">
                            <div class="sheet-header" id="points_stats">
                                <span class="title">Caractéristiques</span>
                                <span class="points">30 points</span> 
                            </div>
                            <div class="sheet-content" id="stats">
                                <!-- Statistique :: Force -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="stat[1]" data-title="La Force évalue la puissance physique et la musculature de votre personnage.">Force</div>
                                    </span>
                                    <span id="inputstat">
                                        <div class="popover" role="tooltip" data-placement="bottom">
                                            <span tabindex="0" data-toggle="popover" data-popover="text-test">
                                                <i class="fas fa-info-circle help"></i>
                                            </span>
                                            <div class="popover-content" style="width: 400px;">
                                                <h3 class="popover-header">Force</h3>
                                                <div class="popover-body">La Force évalue la puissance physique et la musculature de votre personnage. Si elle est suffisamment élevée, elle ocnfère un bonus à l'attaque et aux dégâts au corps à corps, ce qui la rend particulièrement utile pour les utilisateurs d'armes de contact (vibro-lame, sabre-laser, etc).</div>
                                            </div>
                                        </div>
                                        <input type="number" name="stats_strength" id="stats_strength" value="0" min="0" max="18" />
                                    </span>
                                </div>
                                <!-- Statistique :: Dextérité -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="stat[2]" data-title="La Dextérité représente l'agilité et les réflexes du personnage.">Dextérité</div>
                                    </span>
                                    <span id="inputstat">
                                        <div class="popover" role="tooltip" data-placement="bottom">
                                            <span tabindex="0" data-toggle="popover" data-popover="text-test">
                                                <i class="fas fa-info-circle help"></i>
                                            </span>
                                            <div class="popover-content" style="width: 400px;">
                                                <h3 class="popover-header">Dextérité</h3>
                                                <div class="popover-body">La Dextérité représente l'agilité et les réflexes du personnage. Si elle est suffisamment élevée, elle confère un bonus à la défense et aux jets d'attaque à distance, ce qui la rend particulièrement utile pour les utilisateurs d'armes de combat à distance (pistolets, blasters, etc).</div>
                                            </div>
                                        </div>
                                        <input type="number" name="stats_dexterity" id="stats_dexterity" value="0" min="0" max="18" />
                                    </span>
                                </div>
                                <!-- Statistique :: Constitution -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="stat[3]" data-title="La Constitution représente la santé du personnage.">Constitution</div>
                                    </span>
                                    <span id="inputstat">
                                        <div class="popover" role="tooltip" data-placement="bottom">
                                            <span tabindex="0" data-toggle="popover" data-popover="text-test">
                                                <i class="fas fa-info-circle help"></i>
                                            </span>
                                            <div class="popover-content" style="width: 400px;">
                                                <h3 class="popover-header">Constitution</h3>
                                                <div class="popover-body">La Constitution représente la santé du personnage. Si elle est suffisamment élevée, elle permet de gagner des points de vitalité supplémentaires à chaque changement de niveau. Elle est importante pour tout le monde, mais essentielle pour les soldats et les Jedi Gardiens.</div>
                                            </div>
                                        </div>
                                        <input type="number" name="stats_constitution" id="stats_constitution" value="0" min="0" max="18" />
                                    </span>
                                </div>
                                <!-- Statistique :: Intelligence -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="stat[4]" data-title="L'Intelligence détermine les facultés d'apprentissage et de raisonnement de votre personnage.">Intelligence</div>
                                    </span>
                                    <span id="inputstat">
                                        <div class="popover" role="tooltip" data-placement="bottom">
                                            <span tabindex="0" data-toggle="popover" data-popover="text-test">
                                                <i class="fas fa-info-circle help"></i>
                                            </span>
                                            <div class="popover-content" style="width: 400px;">
                                                <h3 class="popover-header">Intelligence</h3>
                                                <div class="popover-body">L'Intelligence détermine les facultés d'apprentissage et de raisonnement de votre personnage. Si elle est suffisamment élevée, elle augmente le nombre de points que vous pouvez répartir entre vos compétences.</div>
                                            </div>
                                        </div>
                                        <input type="number" name="stats_intelligence" id="stats_intelligence" value="0" min="0" max="18" />
                                    </span>
                                </div>
                                <!-- Statistique :: Sagesse -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="stat[5]" data-title="La Sagesse permet d'évaluer la volonté et les perceptions.">Sagesse</div>
                                    </span>
                                    <span id="inputstat">
                                        <div class="popover" role="tooltip" data-placement="bottom">
                                            <span tabindex="0" data-toggle="popover" data-popover="text-test">
                                                <i class="fas fa-info-circle help"></i>
                                            </span>
                                            <div class="popover-content" style="width: 400px;">
                                                <h3 class="popover-header">Sagesse</h3>
                                                <div class="popover-body">La Sagesse permet d'évaluer la volonté et les perceptions.  Si elle est suffisamment élevée, elle augement le nombre de points Force d'un Jedi, tout en améliorant ses jets de sauvegarde contre les pouvoirs liés à la Force. Dans le même temps, il est plus difficile de résister à ses pouvoirs liés à la Force.</div>
                                            </div>
                                        </div>
                                        <input type="number" name="stats_wisdom" id="stats_wisdom" value="0" min="0" max="18" />
                                    </span>
                                </div>
                                <!-- Statistique :: Charisme -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="stat[6]" data-title="Un Charisme élevé augmente la puissance des pouvoirs de la Force. Il permet de réduire le malus appliqué lors de l'utilisation de pouvoir de la Force d'un alignement opposé, mais aussi d'augmenter la précision de vos compagnons. Enfin, le Charisme influe sur les facultés de persuasion." data-placement="right">Charisme</div>
                                    </span>
                                    <span id="inputstat">
                                        <div class="popover" role="tooltip" data-placement="bottom">
                                            <span tabindex="0" data-toggle="popover" data-popover="text-test">
                                                <i class="fas fa-info-circle help"></i>
                                            </span>
                                            <div class="popover-content" style="width: 400px;">
                                                <h3 class="popover-header">Charisme</h3>
                                                <div class="popover-body">Un Charisme élevé augmente la puissance des pouvoirs de la Force. Il permet de réduire le malus appliqué lors de l'utilisation de pouvoir de la Force d'un alignement opposé (un personnage du Côté Lumineux avec un charisme élevé est moins pénalisé s'il utilise des pouvoirs du Côté Obscur), mais aussi d'augmenter la précision de vos compagnons. Enfin, le Charisme influe sur les facultés de persuasion.</div>
                                            </div>
                                        </div>
                                        <input type="number" name="stats_charisma" id="stats_charisma" value="0" min="0" max="18" />
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="sheet">
                            <div class="sheet-header" id="points_skills">
                                <span class="title">Compétences</span>
                                <span class="points">20 points</span>
                            </div>
                            <div class="sheet-content" id="skills">
                                <!-- Compétence :: Informatique -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="skill[1]" >Informatique</div>
                                    </span>
                                    <span id="inputskill">
                                        <div class="popover" role="tooltip" data-placement="bottom">
                                            <span tabindex="0" data-toggle="popover" data-popover="text-test">
                                                <i class="fas fa-info-circle help"></i>
                                            </span>
                                            <div class="popover-content" style="width: 400px;">
                                                <h3 class="popover-header">Informatique</h3>
                                                <div class="popover-body">
                                                    <p>Caractéristique associée : Intelligence</p>
                                                    <p>Informatique permet au personnage de s'infiltrer dans les systèmes informatiques à l'aide de programmes spécialement prévus dans ce but. Il est possible de s'en servir pour mettre une tourelle automatique hors service ou inonder un secteur patrouillé, par exemple, mais aussi d'accomplir des tâches bien plus complexes, à condition d'utiliser davantage de programmes d'intrusion. Lorsque cette caractéristique atteint un niveau élevé, le nombre de programmes d'intrusion nécessaires est réduit de 1 (avec une limite inférieure de 1) tous les 4 points en Réparation, modificateurs de caractéristiques inclus.</p>
                                                </div>
                                            </div>
                                        </div>
                                        <input type="number" name="skills_inf" id="skills_inf" value="0" min="0" />
                                    </span>
                                </div>
                                <!-- Compétence :: Démolition -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="skill[2]">Démolition</div>
                                    </span>
                                    <span id="inputskill">
                                        <div class="popover" role="tooltip" data-placement="bottom">
                                            <span tabindex="0" data-toggle="popover" data-popover="text-test">
                                                <i class="fas fa-info-circle help"></i>
                                            </span>
                                            <div class="popover-content" style="width: 400px;">
                                                <h3 class="popover-header">Démolition</h3>
                                                <div class="popover-body">
                                                    <p>Caractéristique associée : Intelligence</p>
                                                    <p>Démolition permet de poser, récupérer ou désamorcer les mines, lesquelles peuvent être simples (DD de 10 pour les poser), intermédiaires (DD de 20) ou complexes (DD de 30). Toute tentative de désamorçage ajoute +5 au DD associé au piège. Pour récupérer une mine, il faut ajouter +10 au DD correspondant. Il faut avoir reçu la formation nécessaire pour pouvoir utiliser cette compétence.</p>
                                                </div>
                                            </div>
                                        </div>
                                        <input type="number" name="skills_demo" id="skills_demo" value="0" min="0" />
                                    </span>
                                </div>
                                <!-- Compétence :: Discrétion -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="skill[3]">Discrétion</div>
                                    </span>
                                    <span id="inputskill">
                                        <i class="fas fa-info-circle help"></i>
                                        <input type="number" name="skills_dis" id="skills_dis" value="0" min="0" />
                                    </span>   
                                </div>
                                <!-- Compétence :: Vigilance -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="skill[4]">Vigilance</div>
                                    </span>
                                    <span id="inputskill">
                                        <i class="fas fa-info-circle help"></i>
                                        <input type="number" name="skills_vig" id="skills_vig" value="0" min="0" />
                                    </span> 
                                </div>
                                <!-- Compétence :: Persuasion -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="skill[5]">Persuasion</div>
                                    </span>
                                    <span id="inputskill">
                                        <i class="fas fa-info-circle help"></i>
                                        <input type="number" name="skills_per" id="skills_per" value="0" min="0" />
                                    </span>
                                </div>
                                <!-- Compétence :: Réparation -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="skill[6]">Réparation</div>
                                    </span>
                                    <span id="inputskill">
                                        <i class="fas fa-info-circle help"></i>
                                        <input type="number" name="skills_rep" id="skills_rep" value="0" min="0" />
                                    </span>
                                </div>
                                <!-- Compétence :: Sécurité -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="skill[7]">Sécurité</div>
                                    </span>
                                    <span id="inputskill">
                                        <i class="fas fa-info-circle help"></i>
                                        <input type="number" name="skills_sec" id="skills_sec" value="0" min="0" />
                                    </span>
                                </div>
                                <!-- Compétence :: Premiers Secours -->
                                <div class="sub-category">
                                    <span>
                                        <div class="category-name" id="skill[8]">Premiers Secours</div>
                                    </span>
                                    <span id="inputskill">
                                        <i class="fas fa-info-circle help"></i>
                                        <input type="number" name="skills_health" id="skills_health" value="0" min="0" />
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="sheet">
                            <div class="sheet-header center">Informations</div>
                            <div class="sheet-content" id="informations">
                                <p>Les caractéristiques de votre personnage lui donnent des bonus ou des malus à de nombreux jets (combat, etc) et pouvoirs (y compris ceux dus à la Force). 
                                Reportez-vous à chaque caractéristique pour voir sur quels aspects du jeu elle influe.</p>
                                <p>Une valeur est associée à chacune des compétences de votre personnage. Il s'agit du degré de maîtrise qu'il a atteint dans cette compétence, et c'est cela
                                qui détermine son efficacité quand il y fait appel. Chaque fois que l'on utilise une compétence pour accomplir une tâche, le degré de maîtrise du personnage 
                                est comparé au degré de difficulté (ou DD) de la tâche en question.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Outil :: Générateur -->
                <div id="generator" style="display: none;">
                    <div class="large-box">
                        <div class="large-box-header">Spécialités autres & secret(s) :</div>
                        <div class="large-box-content">
                            <textarea name="specialites_autres_secrets" placeholder="Entrez ici vos spécialités autres et secrets..."></textarea>
                        </div>
                    </div>
                    <div class="large-box">
                        <div class="large-box-header">Commentaires</div>
                        <div class="large-box-content">
                            <textarea name="commentaires" placeholder="Entrez ici vos commentaires..."></textarea>
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <span style="color:red;" id="errormsg"></span><br />
                        <label>
                            <span style="color:brown;">Le titre du sujet sera créé automatiquement !</span>
                        </label>
                        <button type="button" id="genfile">Générer la fiche</button>
                    </div>
                </div>
                <!-- Boutons -->
                <div class="sheet-buttons">
                    <button type="button" id="cancel" name="cancel">Annuler</button>
                    <button type="button" id="play" name="play">Jouer</button>
                </div>
            </form>
        </div>
        <div id="modals">
            <!-- Fenêtre :: Générateur -->
            <div id="genwindow" class="modal" aria-hidden="true" role="dialog" aria-labelledby="titlemodal" style="display: none;">
                <div class="modal-wrapper" id="modalstop">
                    <div class="modal-header">
                        <button class="modal-button close" id="close"><i class="fas fa-times"></i></button>
                        <span class="modal-title" id="titlemodal">Générateur</span>
                    </div>
                    <div class="modal-content">
                        <p>Cette fonctionnalité n'a pas encore été implémentée.</p>  
                    </div>
                    <div class="modal-footer">
                        <div class="left"></div> 
                        <div class="right"><button class="modal-button" type="button" id="btnclose">Fermer</button></div> 
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer></footer>
</body>
</html>